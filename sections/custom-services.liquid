
{% style %}
  .service-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 30px;
  }
  img { 
    max-width: 100%;
  }
{% endstyle %}

<div class="page-width">
    {% if section.settings.sub_heading != blank or section.settings.heading != blank  %}
        <div class="heading-wrapper">
            {% if section.settings.sub_heading != blank %}
                <div class="subheading">{{ section.settings.sub_heading }}</div>
            {% endif %}
            {% if section.settings.heading != blank %}
                <h2 class="heading">{{ section.settings.heading }}</h2>
            {% endif %}
        </div>
    {% endif %}
    <div class="service-container">
        {% for block in section.blocks %}
            <div class="service-block-item">
                <div class="media-container">
                    {% if block.settings.service_image != blank %}
                        {%- liquid
                            assign height = block.settings.service_image.width | divided_by: block.settings.service_image.aspect_ratio | round
                            assign sizes = '(min-width: 750px) 50vw, 100vw'
                            assign widths = '375, 550, 750, 1100, 1500, 1780, 2000, 3000, 3840'
                        -%}

                        {{ block.settings.service_image 
                            | image_url: width: 1100
                            | image_tag: loading: 'lazy', height: height, sizes: sizes, widths: widths
                        }}
                    {% endif %}
                </div>
                <div class="content-container">
                    {% if block.settings.service_title != blank %}
                        <h4 class="service-title">{{ block.settings.service_title }}</h4>
                    {% endif %}
                    {% if block.settings.service_description != blank %}
                        <p class="service-description">{{ block.settings.service_description }}</p>
                    {% endif %}
                    {% if block.settings.button_text != blank %}
                        <a href="{{ block.settings.button_url }}" class="btn btn-link">{{ block.settings.button_text }}</a>
                    {% endif %}
                </div>
            </div>    
        
        {% endfor %}
    </div>
</div>

{% schema %}
{
  "name": "Custom Services",
  "tag": "section",
  "class": "ta-services",
  "max_blocks": 6,
  "settings": [
    {
      "type": "header",
      "content": "Sub Heading"
    },
    {
      "type": "inline_richtext",
      "label": "sub heading",
      "id": "sub_heading"
    },
    {
      "type": "header",
      "content": "Heading"
    },
    {
      "type": "inline_richtext",
      "label": "heading",
      "id": "heading"
    }
  ],
  "blocks": [
    {
      "type": "custom_services",
      "name": "custom services",
      "limit": 6,
      "settings": [
        {
          "type": "image_picker",
          "label": "service image",
          "id": "service_image"
        },
        {
          "type": "inline_richtext",
          "label": "Title",
          "id": "service_title"
        },
        {
          "type": "inline_richtext",
          "label": "Description",
          "id": "service_description"
        },
        {
          "type": "text",
          "label": "button text",
          "id": "button_text",
          "default": "Learn More",
          "placeholder": "Learn More"
        },
        {
          "type": "url",
          "label": "button url",
          "id": "button_url"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Services"
    }
  ]
}
{% endschema %}